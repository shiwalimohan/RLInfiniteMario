#------------------------------------------------------
sp {evaluate-operator*elaborate*name
   (state <s> ^superstate <ss>)
   (<ss> ^operator.name evaluate-operator)
-->  
   (<s> ^name evaluate-operator)
}    

sp {evaluate-operator*elaborate*operator-attributes
   (state <s> ^name evaluate-operator
   	      ^superstate <ss>)
   (<ss> ^operator <sop>)
   (<sop> ^superoperator <so>
   	  ^evaluation <e>
	  ^superstate <sss>
	  ^superproblem-space <ssp>)
-->  
   (<s> ^superoperator <so>
   	^evaluation <e>
	^op-tie-state <sss>
	^op-tie-problem-space <sp>)
}

#-----one level copy for all objects
#-----so the predictions are maintained when evaluating different superoperators
#-----reduce redundant work
sp {evaluate-operator*copy*objects
   (state <s> ^name evaluate-operator
   	      ^op-tie-state <ots>)
   (<ots> ^object <obj>)
-->
   (<s> ^object <obj>)
}

#-----two level copy for mario
#-----since the predictions for mario are dependent on the operator being applied
#-----separate copies need to be maintained
sp {evaluate-operator*copy*mario
   (state <s> ^name evaluate-operator
   	      ^op-tie-state <ots>)
   (<ots> ^mario <mario>)
-->
   (<s> ^mario <mario-new>)
}


sp {evaluate-operator*copy*mario-operators
   (state <s> ^name evaluate-operator
   	      ^op-tie-state <ots>
	      ^mario <mario-s>)
   (<ots> ^mario <mario>)
   (<mario> ^<attr> <val>)
-->
   (<mario-s> ^<attr> <val>)
}

#--predict position of objects in the next time step
sp {evaluate-operator*propose*predict-object
   (state <s> ^name evaluate-operator
   	      ^object <object>)
 -{(state <s> ^prediction <p>)
   (<p> ^object <obj>
   	^value true)}
-->
  (<s> ^operator <o> +)
  (<o> ^name predict-object
       ^object <obj>)
}

sp {evaluate-object*elaborate*all-objects-predicted
   (state <s> ^name evaluate-operator
   	      ^operator <o> +)
-{(<o> ^name predict-object
       ^prediction.value true)}
-->
 (<s> ^not-all-objects-predicted true)}

sp {evaluate-object*elaborate*predict-object*prediction
   (state <s> ^name evaluate-operator
   	      ^operator <o>
	      ^prediction <p>)
   (<o> ^name predict-object
   	^object <obj>)
   (<p> ^object <obj>)
-->
   (<o> ^prediction <p>)
} 
   
#---predict next-position of mario given the superstate-operator------------
sp {evaluate-operator*propose*predict-mario
   (state <s> ^name evaluate-operator
   	      ^mario <mario>
	      ^op-tie-operator <sop>
	      -^not-all-operators-evaluated true)
  -(<mario> ^prediction <p>)
  -->
   (<s> ^operator <op> +)
   (<op> ^name predic-mario 
   	 ^op-tie-operator <sop>)
}

#---predict if there is going to be a collision, and write it back-------------
